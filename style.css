:root {
    --neon-blue: #00f3ff;
    --neon-red: #ff2a6d;
    --ground-dark: #151515;
    --ground-light: #1a1a1a;
}

body {
    margin: 0; overflow: hidden; background: #000;
    font-family: 'Segoe UI', sans-serif; color: white;
}

/* --- THE 3D ENGINE --- */
#viewport {
    position: absolute; inset: 0;
    perspective: 800px; /* Camera Distance */
    overflow: hidden;
    background: #050505; /* Sky color */
}

#world {
    position: absolute;
    top: 50%; left: 50%;
    width: 0; height: 0;
    transform-style: preserve-3d;
    /* The Isometric Tilt */
    transform: rotateX(60deg) rotateZ(0deg); 
}

#ground-grid {
    position: absolute;
    top: -2000px; left: -2000px;
    width: 4000px; height: 4000px;
    background-color: var(--ground-dark);
    background-image: 
        linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
    background-size: 100px 100px;
    transform: translateZ(0); /* Floor Layer */
    pointer-events: none;
}

/* --- ENTITIES (Players, Bots) --- */
.entity {
    position: absolute;
    transform-style: preserve-3d;
    /* Center the anchor point */
    top: 0; left: 0; 
    will-change: transform;
}

/* The Visual Character Body (Billboard) */
.sprite {
    position: absolute;
    width: 40px; height: 60px;
    top: -60px; left: -20px; /* Anchor at feet */
    background: linear-gradient(to bottom, #444, #222);
    border-top: 4px solid white; /* Helmet */
    /* Counter-rotate to face camera */
    transform: rotateX(-60deg); 
    box-shadow: 0 10px 20px rgba(0,0,0,0.5);
}

.sprite.local {
    background: linear-gradient(to bottom, var(--neon-blue), #005577);
    border-top-color: #fff;
    box-shadow: 0 0 15px var(--neon-blue);
}
.sprite.enemy {
    background: linear-gradient(to bottom, var(--neon-red), #550000);
    border-top-color: #fff;
}

/* Gun Model (CSS Shape) */
.gun {
    position: absolute;
    width: 30px; height: 6px;
    background: #000;
    top: 30px; left: 10px;
    transform-origin: 0 50%;
}

/* Nameplate floating above head */
.nameplate {
    position: absolute;
    top: -80px; left: -50px; width: 100px;
    text-align: center;
    font-size: 10px;
    color: white;
    text-shadow: 0 1px 2px black;
    transform: rotateX(-60deg);
    opacity: 0.8;
}

/* --- 3D TREES --- */
.tree {
    position: absolute;
    width: 0; height: 0;
    transform-style: preserve-3d;
}
.tree-trunk {
    position: absolute;
    width: 16px; height: 40px;
    background: #3e2723;
    top: -20px; left: -8px;
    transform: rotateX(-60deg) translateY(-10px);
}
.tree-top {
    position: absolute;
    width: 80px; height: 80px;
    background: radial-gradient(circle at 30% 30%, #4caf50, #1b5e20);
    border-radius: 50%;
    top: -90px; left: -40px;
    transform: rotateX(-60deg);
    box-shadow: 5px 5px 10px rgba(0,0,0,0.4);
}

/* --- 3D CUBES (Buildings/Walls) --- */
.cube {
    position: absolute;
    transform-style: preserve-3d;
}
.face {
    position: absolute;
    backface-visibility: hidden;
}
/* Top Face */
.face.top {
    width: 100%; height: 100%;
    background: #333;
    border: 1px solid #444;
    transform: translateZ(80px); /* Height of building */
}
/* Side Faces (Fake Extrusion) */
.face.front {
    width: 100%; height: 80px;
    background: #222;
    transform: rotateX(-90deg) translateZ(50px); /* Half height offset */
    bottom: -40px;
}
.face.right {
    width: 100%; height: 80px;
    background: #151515;
    transform: rotateY(90deg) rotateX(-90deg) translateZ(50px);
    right: -50%; /* Complex anchor logic simplified in JS */
}

/* --- PROJECTILES --- */
.bullet {
    position: absolute;
    width: 4px; height: 4px;
    background: #ffff00;
    border-radius: 50%;
    transform: translateZ(30px); /* Fly at waist height */
    box-shadow: 0 0 10px #ffff00;
}

/* --- UI OVERLAY (Kept minimal) --- */
#ui-layer { pointer-events: none; position: absolute; inset: 0; }
.glass-panel { 
    pointer-events: auto; position: absolute; 
    top: 50%; left: 50%; transform: translate(-50%,-50%);
    background: rgba(0,0,0,0.8); padding: 40px; border: 1px solid #333;
    text-align: center;
}
.btn-glitch {
    background: var(--neon-blue); border: none; padding: 15px;
    font-weight: bold; cursor: pointer; margin-top: 10px;
}
#hud { position: absolute; inset: 0; }
.vitals-container { position: absolute; bottom: 20px; left: 20px; }
.bar-fill.hp { background: white; height: 8px; box-shadow: 0 0 10px white; }
.top-bar { display: flex; justify-content: center; margin-top: 20px; gap: 20px; }
.stat-box { background: #111; padding: 5px 10px; border: 1px solid #333; }
